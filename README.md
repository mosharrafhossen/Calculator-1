

рзз. HTML тАУ ржХрж╛ржарж╛ржорзЛ / Structure

HTML ржорж╛ржирзЗ: ржкрж╛рждрж╛рзЯ ржХрзА ржХрзА ржерж╛ржХржмрзЗ рждрж╛рж░ рждрж╛рж▓рж┐ржХрж╛
ржЫржмрж┐, рж▓рзЗржЦрж╛, ржмрж╛ржЯржи, ржмрж╛ржХрзНрж╕ тАУ рж╕ржм HTML ржжрж┐рзЯрзЗ ржмрж╛ржирж╛ржирзЛред

рзз.рзз. ржбржХрзБржорзЗржирзНржЯрзЗрж░ рж╢рзБрж░рзБ
<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Advanced Calculator</title>
  ...
</head>
<body>
  ...
</body>
</html>


<!doctype html> тЖТ ржмрзНрж░рж╛ржЙржЬрж╛рж░ржХрзЗ ржмрж▓рзЗ: тАЬржЖржорж┐ HTML5 ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐тАЭ

<html lang="bn"> тЖТ ржкрзБрж░рзЛ ржкрзЗржЬ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ (рж╕рзНржХрзНрж░рж┐ржи рж░рж┐ржбрж╛рж░ ржПржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)

<head> тЖТ ржкрзЗржЬ рж╕ржорзНржкрж░рзНржХрж┐ржд ржорзЗржЯрж╛ ржЗржиржлрзЛ (ржЯрж╛ржЗржЯрзЗрж▓, ржлржирзНржЯ, CSS ржЗрждрзНржпрж╛ржжрж┐)

<body> тЖТ ржпрзЗ ржЕржВрж╢ржЯрж╛ ржЖржорж░рж╛ ржЪрзЛржЦрзЗ ржжрзЗржЦрж┐, рж╕ржм UI ржПржЦрж╛ржирзЗ ржерж╛ржХрзЗ

рзз.рзи. ржорзВрж▓ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ ржХржирзНржЯрзЗржЗржирж╛рж░
<div class="calculator" role="application" aria-label="Advanced calculator">
  ...
</div>


class="calculator" тЖТ CSS ржжрж┐рзЯрзЗ рж╕рзНржЯрж╛ржЗрж▓ ржХрж░рж╛рж░ ржЬржирзНржп ржирж╛ржоред

role="application" тЖТ рж╕рзНржХрзНрж░рж┐ржи рж░рж┐ржбрж╛рж░ржХрзЗ ржмрж▓рзЗ: тАЬржПржЯрж╛ ржПржХржЯрж╛ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЕрзНржпрж╛ржктАЭ

aria-label тЖТ ржПржЯрж╛рж░ ржирж╛ржо ржХрзА, рж╕рзЗржЯрж╛ ржЬрж╛ржирж╛рзЯ (ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржЕржирзНржз ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржЬржирзНржп)ред

рж╕рж╣ржЬ ржХрж░рзЗ: ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ тАЬржкрзБрж░рзЛ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ржХрзЗ ржШрж┐рж░рзЗ ржПржХржЯрж╛ ржмржХрзНрж╕тАЭред

рзз.рзй. рж╣рзЗржбрж╛рж░: ржЯрж╛ржЗржЯрзЗрж▓ + ржерж┐ржо рж╕рзБржЗржЪ
<div class="calc-header">
  <div class="title-group">
    <div class="title">ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░</div>
    <div class="subtitle">ржорзЗржорж░рж┐ + рж╣рж┐рж╕рзНржЯрж░рж┐ + ржХрж┐ржмрзЛрж░рзНржб рж╕рж╛ржкрзЛрж░рзНржЯ</div>
  </div>
  <div class="theme-toggle" id="themeToggle" tabindex="0" role="button" aria-pressed="false">
    <span>ржерж┐ржо</span>
    <div class="switch">
      <div class="switch-thumb"></div>
    </div>
  </div>
</div>


ржПржЦрж╛ржирзЗ ржжрзБржЗржЯрж╛ ржЕржВрж╢:

ржмрж╛ржорзЗ тЖТ ржирж╛ржо ржУ рж╕рж╛ржмржЯрж╛ржЗржЯрзЗрж▓

ржбрж╛ржирзЗ тЖТ ржерж┐ржо ржмржжрж▓рж╛ржирзЛрж░ рж╕рзБржЗржЪ

theme-toggle ржПржЗ <div> ржП ржЖржорж░рж╛ JS ржжрж┐рзЯрзЗ ржХрзНрж▓рж┐ржХ ржЗржнрзЗржирзНржЯ рж▓рж╛ржЧрж╛ржмрзЛред
tabindex="0" тЖТ ржХрж┐ржмрзЛрж░рзНржб ржжрж┐рзЯрзЗ Tab ржЪрж╛ржкрж▓рзЗ ржПржЯрж╛рждрзЗ ржлрзЛржХрж╛рж╕ ржЖрж╕ржмрзЗред
role="button" тЖТ ржпрж╛ржжрзЗрж░ рж╕рзНржХрзНрж░рж┐ржи рж░рж┐ржбрж╛рж░ ржЖржЫрзЗ, ржУржжрзЗрж░ ржХрж╛ржЫрзЗ тАЬржмрж╛ржЯржитАЭ рж╣рж┐рж╕рзЗржмрзЗ ржШрзЛрж╖ржгрж╛ рж╣рзЯред
aria-pressed="false" тЖТ ржПржЦржи ржЕржл (рж▓рж╛ржЗржЯ ржерж┐ржо)ред ржбрж╛рж░рзНржХ ржХрж░рж▓рзЗ true рж╕рзЗржЯ рж╣ржмрзЗред

рзз.рзк. Display: ржпрзЗржЦрж╛ржирзЗ рж╣рж┐рж╕рж╛ржм ржжрзЗржЦрж╛ ржпрж╛рзЯ
<div class="display" aria-live="polite">
  <div class="info-row">
    <div class="memory-indicator" id="memoryIndicator">M</div>
    <div class="history-toggle" id="historyBtn">
      <span class="icon">тЯ│</span>
      <span>рж╣рж┐рж╕рзНржЯрж░рж┐</span>
    </div>
  </div>
  <div class="prev" id="prev"></div>
  <div class="curr" id="curr">0</div>
</div>


memoryIndicator тЖТ M рж▓рзЗржЦрж╛ тАУ ржорзЗржорж░рж┐рждрзЗ ржХрж┐ржЫрзБ ржерж╛ржХрж▓рзЗ ржжрзЗржЦрж╛ржмрзЗ, ржирж╛ ржерж╛ржХрж▓рзЗ ржлрж┐ржХрзЗ ржерж╛ржХржмрзЗред

historyBtn тЖТ рж╣рж┐рж╕рзНржЯрж░рж┐ ржЕржи/ржЕржл ржХрж░рж╛рж░ ржмрж╛ржЯржиред

prev тЖТ ржЖржЧрзЗрж░ ржПржХрзНрж╕ржкрзНрж░рзЗрж╢ржи ржУ = ржжрзЗржЦрж╛ржирзЛрж░ ржЬрж╛рзЯржЧрж╛ (ржпрзЗржоржи 2+3*4 =)

curr тЖТ ржмрж░рзНрждржорж╛ржи рж╕ржВржЦрзНржпрж╛ ржмрж╛ ржлрж▓рж╛ржлрж▓ (ржпрзЗржоржи 14)

aria-live="polite" тЖТ ржпржЦржи ржнрзНржпрж╛рж▓рзБ ржмржжрж▓рж╛рзЯ, рж╕рзНржХрзНрж░рж┐ржи рж░рж┐ржбрж╛рж░ржХрзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржЬрж╛ржирж╛рждрзЗред

рзз.рзл. рж╣рж┐рж╕рзНржЯрж░рж┐ ржкрзНржпрж╛ржирзЗрж▓
<div class="history-panel" id="historyPanel">
  <ul class="history-list" id="historyList"></ul>
</div>


рж╢рзБрж░рзБрждрзЗ ржПржЯрж╛ ржнрзЗрждрж░рзЗ рж▓рзБржХрж╛ржирзЛ ржерж╛ржХрзЗ (CSS ржжрж┐рзЯрзЗ max-height: 0)

historyList ржПрж░ ржнрж┐рждрж░ JS ржжрж┐рзЯрзЗ <li> ржпрзЛржЧ рж╣ржмрзЗ тАУ ржкрзНрж░рждрж┐ржЯрж╛ рж╣ржЪрзНржЫрзЗ ржПржХрзЗржХржЯрж╛ ржкрзБрж░рж╛ржирзЛ рж╣рж┐рж╕рж╛ржмред

ржЙржжрж╛рж╣рж░ржг:
2+3 = 5, 10*2 = 20 ржЗрждрзНржпрж╛ржжрж┐ рж▓рж┐рж╕рзНржЯ ржЖржХрж╛рж░рзЗред

рзз.рзм. Memory ржмрж╛ржЯржи
<div class="memory-row">
  <button class="mem small" data-action="mc">MC</button>
  <button class="mem small" data-action="mr">MR</button>
  <button class="mem small" data-action="mplus">M+</button>
  <button class="mem small" data-action="mminus">MтИТ</button>
</div>


ржПржЗ ржЪрж╛рж░ржЯрж╛ ржмрж╛ржЯржи рж╢рзБржзрзБ ржорзЗржорж░рж┐ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗ ржмрзНржпржмрж╣рж╛рж░ рж╣ржмрзЗ:

MC (Memory Clear) тЖТ ржорзЗржорж░рж┐ рзж ржХрж░рзЗ ржжрзЗрзЯ

MR (Memory Recall) тЖТ ржорзЗржорж░рж┐рж░ рж╕ржВржЦрзНржпрж╛ ржЖржмрж╛рж░ ржбрж┐рж╕ржкрзНрж▓рзЗрждрзЗ ржирж┐рзЯрзЗ ржЖрж╕рзЗ

M+ тЖТ ржорзЗржорж░рж┐рждрзЗ ржмрж░рзНрждржорж╛ржирзЗ ржжрзЗржЦрж╛ржирзЛ рж╕ржВржЦрзНржпрж╛ржЯрж╛ ржпрзЛржЧ ржХрж░рзЗ

MтИТ тЖТ ржорзЗржорж░рж┐ ржерзЗржХрзЗ ржХржорж┐рзЯрзЗ ржжрзЗрзЯ

ржкрзНрж░рждрж┐ржЯрж╛ ржмрж╛ржЯржирзЗрж░ data-action ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ JS ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ, тАЬржЖржорж┐ ржХрзЛржи ржХрж╛ржЬрзЗрж░ ржмрж╛ржЯржиредтАЭ

рзз.рзн. ржирж╛ржорзНржмрж╛рж░ ржУ ржЕржкрж╛рж░рзЗрж╢ржи ржмрж╛ржЯржи
<div class="keys" id="keys">
  <button class="danger small" data-action="clear">C</button>
  <button class="small" data-action="back">тМл</button>
  <button class="small op" data-value="%">%</button>
  <button class="op small" data-value="/">├╖</button>
  ...
  <button class="equal wide" data-action="equals">=</button>
</div>


ржПржЦрж╛ржирзЗ ржжрзБржЗ ржзрж░ржирзЗрж░ рждржерзНржп:

data-action тЖТ рж╕рзНржкрзЗрж╢рж╛рж▓ ржХрж╛ржЬ

clear тЖТ рж╕ржм рж╕рж╛ржл

back тЖТ рж╢рзЗрж╖ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░ ржбрж┐рж▓рж┐ржЯ

equals тЖТ рж░рзЗржЬрж╛рж▓рзНржЯ ржмрзЗрж░ ржХрж░рзЛ

data-value тЖТ ржпрзЗржЯрж╛ expression рж╕рзНржЯрзНрж░рж┐ржВ-ржП ржпрзБржХрзНржд рж╣ржмрзЗ

рж╕ржВржЦрзНржпрж╛ (0тАУ9)

+ - * / % .

ржЖржорж░рж╛ keys ржбрж┐ржнрзЗ ржПржХржЯрж╛ржЗ ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ рж▓рж╛ржЧрж┐рзЯрзЗржЫрж┐ тАУ рж╕ржм ржмрж╛ржЯржирзЗрж░ ржХрзНрж▓рж┐ржХ рж╕рзЗржЦрж╛ржи ржерзЗржХрзЗ ржзрж░рж╛ рж╣рзЯред

рзз.рзо. ржХрж┐ржмрзЛрж░рзНржб рж╣рж┐ржирзНржЯ
<div class="kbd-hint">
  <span class="kbd">Enter</span> = Calculate
  <span class="kbd">Esc</span> = Clear
  <span class="kbd">Backspace</span> = Delete
  <span class="kbd">M</span> = History toggle
</div>


ржПржЯрж╛ рж╢рзБржзрзБ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржЬрж╛ржирж╛ржирзЛрж░ ржЬржирзНржп тАУ ржХрзЛржбрзЗрж░ рж▓ржЬрж┐ржХ ржПржЦрж╛ржирзЗ ржирзЗржЗ, рж╢рзБржзрзБ рж▓рзЗржЦрж╛ред

рзи. CSS тАУ ржбрж┐ржЬрж╛ржЗржи / рж░ржЩ / ржЖржХрзГрждрж┐

CSS рж╣рж▓: ржУржЗ HTML ржЧрзБрж▓рзЛржХрзЗ рж╕рзБржирзНржжрж░ ржХрж░рзЗ рж╕рж╛ржЬрж╛ржирзЛрж░ ржнрж╛рж╖рж╛ред

рзи.рзз. ржерж┐ржорзЗрж░ ржЬржирзНржп ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ (ржХрж╛рж▓рж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржо)
:root{
  --bg:#f3f4f6;
  --panel:#ffffff;
  --accent:#4f46e5;
  --accent-soft:#eef2ff;
  --muted:#9ca3af;
  ...
}
body.dark{
  --bg:#020617;
  --panel:#020617;
  --accent:#6366f1;
  ...
}


:root тЖТ ржкрзБрж░рзЛ ржкрзЗржЬрзЗрж░ ржЬржирзНржп ржбрж┐ржлрж▓рзНржЯ ржнрзНржпрж╛рж▓рзБ (рж▓рж╛ржЗржЯ ржерж┐ржо)ред

body.dark тЖТ ржпржЦржи <body> рждрзЗ class="dark" ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ, рждржЦржи ржПржЗ ржирждрзБржи ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ ржХрж╛ржЬ ржХрж░ржмрзЗ (ржбрж╛рж░рзНржХ ржерж┐ржо)ред

ржпрзЗржоржи:

body{
  background: var(--bg);
  color: var(--text);
}


ржПржЦржи рж╢рзБржзрзБ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржмржжрж▓рж╛рж▓рзЗржЗ ржкрзБрж░рзЛ ржХрж╛рж▓рж╛рж░ ржкрж╛рж▓рзНржЯрзЗ ржпрж╛рзЯред

рзи.рзи. ржмржбрж┐ (ржкрзБрж░рзЛ ржкрзЗржЬ) рж╕рзНржЯрж╛ржЗрж▓
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(...);
  font-family:Inter, ...;
  color:var(--text);
  padding:20px;
  transition:background .25s ease, color .25s ease;
}


ржкрзБрж░рзЛ рж╕рзНржХрзНрж░рж┐ржитАУржЙржЪрзНржЪрждрж╛ (100vh)

display:flex; align-items:center; justify-content:center; тЖТ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ржХрзЗ рж╕рзНржХрзНрж░рж┐ржирзЗрж░ ржорж╛ржЭржЦрж╛ржирзЗ ржЖржирж╛ред

ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржЧрзНрж░рзЗржбрж┐рзЯрзЗржирзНржЯред

ржерж┐ржо ржмржжрж▓рж╛рж▓рзЗ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржУ ржЯрзЗржХрзНрж╕ржЯ ржХрж╛рж▓рж╛рж░ рж╕рзНржорзБрже ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи рж╣рзЯ (transition ржжрж┐рзЯрзЗ)ред

рзи.рзй. ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ ржмржХрзНрж╕
.calculator {
  width:380px;
  ...
  background:linear-gradient(...);
  border-radius:20px;
  box-shadow: var(--shadow-main);
  ...
  backdrop-filter: blur(16px);
}


ржПржЯрж╛ ржорзВрж▓ ржХрж╛рж░рзНржб / ржмржХрзНрж╕ред

box-shadow тЖТ ржЙржБржЪрзБ ржжрзЗржЦрж╛рзЯред

backdrop-filter: blur(16px); тЖТ ржЧрзНрж▓рж╛рж╕рзЗрж░ ржорждрзЛ рж╕рзНржмржЪрзНржЫ ржЗржлрзЗржХрзНржЯред

ржбрж╛рж░рзНржХ ржерж┐ржорзЗ ржЕржирзНржпрж░ржХржо ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред

рзи.рзк. ржбрж┐рж╕ржкрзНрж▓рзЗ, рж╣рж┐рж╕рзНржЯрж░рж┐, ржмрж╛ржЯржи ржЗрждрзНржпрж╛ржжрж┐

рж╕ржмржЧрзБрж▓рзЛрждрзЗржЗ:

display:flex ржмрж╛ display:grid тЖТ рж╕рзБржирзНржжрж░ ржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржирзЛрж░ ржЬржирзНржпред

border-radius тЖТ ржХрзЛржгрж╛ ржЧрзЛрж▓ред

box-shadow тЖТ рж╣рж╛рж▓ржХрж╛ ржЫрж╛рзЯрж╛ред

:hover / :active / :focus-visible тЖТ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржлрж┐рж▓рж┐ржВред

ржмрж╛ржЯржирзЗ transition ржжрж┐рзЯрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ рж╕рж╛ржорж╛ржирзНржп ржЫрзЛржЯ рж╣рзЯ, ржЫрж╛рзЯрж╛ ржХржорзЗ тАУ ржлрж▓рзЗ ржоржирзЗ рж╣рзЯ рж╕рждрзНржпрж┐ ржмрж╛ржЯржи ржЪрж╛ржкрж▓рж╛ржо ЁЯШК

рзи.рзл. ржЫрзЛржЯ рж╕рзНржХрзНрж░рж┐ржирзЗрж░ ржЬржирзНржп ржорж┐ржбрж┐рзЯрж╛ ржХрзЛрзЯрж╛рж░рж┐
@media (max-width:420px){
  .calculator{ padding:12px; border-radius:16px; }
  .display{ min-height:68px; padding:10px; }
  .curr{ font-size:26px; }
  button{ padding:12px; font-size:16px; }
}


ржорзЛржмрж╛ржЗрж▓/ржЫрзЛржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржлржирзНржЯ ржУ ржкрзНржпрж╛ржбрж┐ржВ ржХрж┐ржЫрзБржЯрж╛ ржЫрзЛржЯ, ржпрж╛рждрзЗ рж╕ржмржХрж┐ржЫрзБ ржлрж┐ржЯ рж╣рзЯред

рзй. JavaScript тАУ ржкрзБрж░рзЛ ржорж╕рзНрждрж┐рж╖рзНржХ / рж▓ржЬрж┐ржХ

JavaScript ржПржЦрж╛ржирзЗ рждрж┐ржиржЯрж╛ ржмрзЬ ржХрж╛ржЬ ржХрж░ржЫрзЗ:

ржЗржиржкрзБржЯ ржирзЗрзЯ (ржорж╛ржЙрж╕ + ржХрж┐ржмрзЛрж░рзНржб)

expression (рж╕рзНржЯрзНрж░рж┐ржВ) ржмрж╛ржирж╛рзЯ, ржнрзЗржЩрзЗ ржжрзЗржЦрж╛рзЯ

рж╣рж┐рж╕рж╛ржм ржХрж░рзЗ, рж╣рж┐рж╕рзНржЯрж░рж┐тАУржорзЗржорж░рж┐тАУржерж┐ржо ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ

ржкрзБрж░рзЛ ржХрзЛржбржЯрж╛ ржПржЗржнрж╛ржмрзЗ ржорзЛрзЬрж╛ржирзЛ:

(function(){
  // рж╕ржм ржХрзЛржб ржПржЗ ржнрзЗрждрж░рзЗ
})();


ржПржЯрж╛рж░ ржирж╛ржо IIFE тЖТ Immediately Invoked Function Expression
ржорж╛ржирзЗ: тАЬржПржХржЯрж╛ ржлрж╛ржВрж╢ржи ржмрж╛ржирж┐рзЯрзЗ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЪрж╛рж▓рж╛ржирзЛтАЭ, ржпрж╛рждрзЗ ржнрзЗрждрж░рзЗрж░ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ржЧрзБрж▓рзЛ ржмрж╛ржЗрж░рзЗ рж▓рж┐ржХ ржирж╛ рж╣рзЯред

рзй.рзз. DOM ржерзЗржХрзЗ ржПрж▓рж┐ржорзЗржирзНржЯ ржЖржирж╛ + ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ржЧрзБрж▓рзЛ
const prevEl     = document.getElementById('prev');
const currEl     = document.getElementById('curr');
const keys       = document.getElementById('keys');
const historyPanel = document.getElementById('historyPanel');
const historyList  = document.getElementById('historyList');
const historyBtn   = document.getElementById('historyBtn');
const memoryIndicator = document.getElementById('memoryIndicator');
const themeToggle = document.getElementById('themeToggle');

let expression = '';
let previous   = '';
let history    = [];  // {expr, result}
let memory     = 0;


prevEl, currEl ржЗрждрзНржпрж╛ржжрж┐ рж╣ржЪрзНржЫрзЗ HTML-ржПрж░ ржПрж▓рж┐ржорзЗржирзНржЯ (ржбрж┐ржн/ржмрж╛ржЯржи ржЗрждрзНржпрж╛ржжрж┐) тАУ ржПржЧрзБрж▓рзЛржХрзЗ ржзрж░рзЗ JS ржжрж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░ржмрзЛред

expression тЖТ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржЦржи ржкрж░рзНржпржирзНржд ржХрзА рж▓рж┐ржЦрзЗржЫрзЗ, рж╕рзЗржЯрж╛ ржЯрзЗржХрзНрж╕ржЯ ржЖржХрж╛рж░рзЗ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ (ржпрзЗржоржи "12+3*4").

previous тЖТ ржЖржЧрзЗрж░ рж╣рж┐рж╕рж╛ржм (ржЙржкрж░рзЗрж░ ржЫрзЛржЯ рж▓рж╛ржЗржи)ред

history тЖТ ржПржХрж╛ржзрж┐ржХ {expr, result} ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЕрзНржпрж╛рж░рзЗред
ржЙржжрж╛рж╣рж░ржг:

[
  { expr: "2+3", result: "5" },
  { expr: "10*2", result: "20" }
]


memory тЖТ ржПржХржЯрж┐ рж╕ржВржЦрзНржпрж╛, ржорзЗржорж░рж┐ ржлрж┐ржЪрж╛рж░рзЗрж░ ржЬржирзНржпред

рзй.рзи. ржерж┐ржо (Theme) рж╕рж┐рж╕рзНржЯрзЗржо
рзй.рзи.рзз. LocalStorage ржерзЗржХрзЗ ржкрзБрж░ржирзЛ ржерж┐ржо ржирзЗржУрзЯрж╛
function applySavedTheme(){
  try{
    const saved = localStorage.getItem('calc-theme');
    if (saved === 'dark') {
      document.body.classList.add('dark');
      themeToggle.setAttribute('aria-pressed','true');
    }
  }catch(e){}
}
applySavedTheme();


localStorage тЖТ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЫрзЛржЯ ржбрж╛ржЯрж╛ рж░рж╛ржЦрж╛рж░ ржЬрж╛рзЯржЧрж╛ (рж╕рж╛ржЗржЯ рж░рж┐рж▓рзЛржб ржХрж░рж▓рзЗржУ ржерж╛ржХрзЗ)ред

key: 'calc-theme'

ржпржжрж┐ ржнрзНржпрж╛рж▓рзБ "dark" ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ body рждрзЗ .dark ржХрзНрж▓рж╛рж╕ ржпрзЛржЧ ржХрж░рзЗ тЖТ CSS ржЕржирзБржпрж╛рзЯрзА ржбрж╛рж░рзНржХ ржерж┐ржоред

try...catch тЖТ ржХрзЛржирзЛ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржпржжрж┐ localStorage ржХрж╛ржЬ ржирж╛ ржХрж░рзЗ, ржпрж╛рждрзЗ error рж╣рж▓рзЗржУ рж╕рж╛ржЗржЯ ржирж╖рзНржЯ ржирж╛ рж╣рзЯред

рзй.рзи.рзи. ржерж┐ржо ржЯржЧрж▓ ржмрж╛ржЯржи
themeToggle.addEventListener('click', toggleTheme);
themeToggle.addEventListener('keydown', (e)=>{
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    toggleTheme();
  }
});


ржорж╛ржЙрж╕ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ toggleTheme() ржХрж▓ рж╣рзЯред

ржХрж┐ржмрзЛрж░рзНржбрзЗ Enter ржмрж╛ Space ржЪрж╛ржкрж▓рзЗржУ ржПржХржЗ ржХрж╛ржЬред

function toggleTheme(){
  const isDark = document.body.classList.toggle('dark');
  themeToggle.setAttribute('aria-pressed', isDark ? 'true' : 'false');
  try{
    localStorage.setItem('calc-theme', isDark ? 'dark' : 'light');
  }catch(e){}
}


classList.toggle('dark') тЖТ

ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ тЖТ ржпрзЛржЧ ржХрж░рзЗ (true рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ)

ржерж╛ржХрж▓рзЗ тЖТ рждрзБрж▓рзЗ ржжрзЗрзЯ (false рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ)

ржПрж░ржкрж░ localStorage ржП ржЖржкржбрзЗржЯ ржХрж░рзЗ рж░рж╛ржЦрзЗред

рзй.рзй. ржбрж┐рж╕ржкрзНрж▓рзЗ ржЖржкржбрзЗржЯ ржлрж╛ржВрж╢ржи
function updateDisplay(){
  prevEl.textContent = previous;
  currEl.textContent = expression || '0';
}


prevEl ржП ржЖржЧрзЗрж░ ржПржХрзНрж╕ржкрзНрж░рзЗрж╢ржи+= ржжрзЗржЦрж╛ржирзЛ рж╣рзЯред

currEl ржП expression ржжрзЗржЦрж╛ржирзЛ рж╣рзЯред

ржпржжрж┐ expression ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ (''), рждржЦржи || '0' ржПрж░ ржХрж╛рж░ржгрзЗ 0 ржжрзЗржЦрж╛ржмрзЗред

рзй.рзк. ржорзЗржорж░рж┐ ржЗржирзНржбрж┐ржХрзЗржЯрж░
function updateMemoryIndicator(){
  if (memory !== 0){
    memoryIndicator.classList.add('active');
  } else {
    memoryIndicator.classList.remove('active');
  }
}


memory ржнрзНржпрж╛рж▓рзБ рзж ржирж╛ рж╣рж▓рзЗ M ржЪрж┐рж╣рзНржиржЯрж╛ ржЙржЬрзНржЬрзНржмрж▓ рж╣рзЯред

рзж рж╣рж▓рзЗ ржХрзНрж▓рж╛рж╕ рждрзБрж▓рзЗ ржирж┐рзЯрзЗ ржлрж┐ржХрзЗ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯред

рзй.рзл. рж╣рж┐рж╕рзНржЯрж░рж┐ ржпрзЛржЧ ржУ ржжрзЗржЦрж╛ржирзЛ
function addToHistory(expr, result){
  if (!expr) return;
  history.unshift({expr, result});  // рж▓рж┐рж╕рзНржЯрзЗрж░ рж╢рзБрж░рзБрждрзЗ ржпрзЛржЧ
  if (history.length > 10) history.pop(); // рж╕рж░рзНржмрзЛржЪрзНржЪ рззрзжржЯрж╛ рж░рж╛ржЦржмрзЗ
  renderHistory();
}


unshift() тЖТ ржЕрзНржпрж╛рж░рзЗрж░ рж╢рзБрж░рзБрждрзЗ ржЗржирж╕рж╛рж░рзНржЯред

pop() тЖТ рж╢рзЗрж╖рзЗрж░ ржЖржЗржЯрзЗржо ржмрж╛ржж ржжрзЗржУрзЯрж╛ред

function renderHistory(){
  historyList.innerHTML = '';
  history.forEach((item, index)=>{
    const li = document.createElement('li');
    li.className = 'history-item';
    li.dataset.index = index;
    li.innerHTML = `
      <span class="history-expr">${item.expr}</span>
      <span class="history-res">${item.result}</span>
    `;
    historyList.appendChild(li);
  });
}


ржЖржЧрзЗ historyList.innerHTML = '' ржжрж┐рзЯрзЗ ржкрзБрж░рзЛржирзЛ рж╕ржм ржорзБржЫрзЗ ржлрзЗрж▓рзЗред

рждрж╛рж░ржкрж░ рж▓рзБржк ржЪрж╛рж▓рж┐рзЯрзЗ ржкрзНрж░рждрж┐ржЯрж╛ рж╣рж┐рж╕рзНржЯрж░рж┐ ржерзЗржХрзЗ <li> ржмрж╛ржирж╛рзЯред

рж╣рж┐рж╕рзНржЯрж░рж┐ ржЖржЗржЯрзЗржорзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржкрзБрж░ржирзЛ рж░рзЗржЬрж╛рж▓рзНржЯ ржЖржмрж╛рж░ рж▓рзЛржб:

historyList.addEventListener('click', (e)=>{
  const item = e.target.closest('.history-item');
  if (!item) return;
  const idx = Number(item.dataset.index);
  const record = history[idx];
  if (!record) return;
  expression = record.result;
  previous = record.expr + ' =';
  updateDisplay();
});


closest('.history-item') тЖТ ржХрзНрж▓рж┐ржХ ржХрж░рж╛ ржПрж▓рж┐ржорзЗржирзНржЯ ржерзЗржХрзЗ ржЙржкрж░рзЗрж░ ржжрж┐ржХрзЗ ржЧрж┐рзЯрзЗ ржпрзЗ <li> рж╕рзЗржЯрж╛ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рзЗред

ржУржЗ рж╣рж┐рж╕рзНржЯрж░рж┐ ржЕржмржЬрзЗржХрзНржЯ ржерзЗржХрзЗ result ржЖржмрж╛рж░ expression рж╣рж┐рж╕рзЗржмрзЗ ржмрж╕рж╛ржирзЛ рж╣рзЯред

рзй.рзм. рж╣рж┐рж╕рзНржЯрж░рж┐ ржкрзНржпрж╛ржирзЗрж▓ ржЯржЧрж▓
historyBtn.addEventListener('click', ()=>{
  historyPanel.classList.toggle('open');
});


.open ржХрзНрж▓рж╛рж╕ ржпрзЛржЧ/рждрзЛрж▓рж╛ рж╣рзЯред

CSS ржП .history-panel.open{ max-height: 140px; } ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗ ржкрзНржпрж╛ржирзЗрж▓ ржУржкрзЗржи рж╣рзЯред

рзй.рзн. ржирж┐рж░рж╛ржкржж ржПржХрзНрж╕ржкрзНрж░рзЗрж╢ржи ржЗржнрзНржпрж╛рж▓рзБрзЯрзЗрж╢ржи (safeEval)
рзз) Regex тАУ allowed character
const validRe = /^[0-9+\-*/().% ]*$/;


ржПржЗ рж░рзЗржЧрзБрж▓рж╛рж░ ржПржХрзНрж╕ржкрзНрж░рзЗрж╢ржи ржорж╛ржирзЗ:

рж╕рзНржЯрзНрж░рж┐ржВ-ржПрж░ рж╢рзБрж░рзБ ^ ржерзЗржХрзЗ рж╢рзЗрж╖ $ ржкрж░рзНржпржирзНржд

рж╢рзБржзрзБ ржПржЗ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж░ржЧрзБрж▓рзЛ ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ:

рж╕ржВржЦрзНржпрж╛ 0тАУ9

+ - * / ( ) . %

рж╕рзНржкрзЗрж╕

ржЕржирзНржп ржХрж┐ржЫрзБ ржерж╛ржХрж▓рзЗ ржЕржмрзИржз ржзрж░рж╛ рж╣ржмрзЗред

рзи) safeEval ржлрж╛ржВрж╢ржи
function safeEval(expr){
  expr = expr.replace(/├Ч/g, '*').replace(/├╖/g, '/').replace(/тИТ/g, '-');
  expr = expr.trim();

  if (!validRe.test(expr) || expr.length > 200) {
    throw new Error('Invalid expression');
  }
  const result = Function('"use strict"; return (' + expr + ')')();
  if (typeof result === 'number' && !isFinite(result)) {
    throw new Error('Math error');
  }
  return result;
}


ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ:

ржЗржЙржирж┐ржХрзЛржб ржЕржкрж╛рж░рзЗржЯрж░ ржкрж░рж┐ржмрж░рзНрждржи

рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖржорж░рж╛ ├Ч ржЖрж░ ├╖ ржжрзЗржЦрж╛ржЪрзНржЫрж┐, ржХрж┐ржирзНрждрзБ JS ржмрзЛржЭрзЗ * ржЖрж░ /

рждрж╛ржЗ replace ржжрж┐рзЯрзЗ рж╕рзЗржЧрзБрж▓рзЛ ржмржжрж▓рж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред

trim() тЖТ рж╢рзБрж░рзБ ржЖрж░ рж╢рзЗрж╖рзЗ ржерж╛ржХрж╛ ржлрж╛рж▓рждрзБ рж╕рзНржкрзЗрж╕ ржХрж╛ржЯрж▓ред

regex ржжрж┐рзЯрзЗ ржЪрзЗржХ

ржпржжрж┐ A-Z, ржХрзЛржирзЛ ржЪрж┐рж╣рзНржи, ржЕржирзНржп ржХрж┐ржЫрзБ ржерж╛ржХрзЗ тЖТ failред

рзирзжрзж ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░рзЗрж░ ржмрзЗрж╢рж┐ рж╣рж▓рзЗ fail (ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЬржирзНржп)ред

Function(...) ржжрж┐рзЯрзЗ рж╣рж┐рж╕рж╛ржм

ржпрзЗржоржи expr = "12+3*4"

ржмрж╛ржирж╛ржирзЛ рж╣ржЪрзНржЫрзЗ:

Function('"use strict"; return (12+3*4)')();


ржПржЯрж╛ ржлрж▓рж╛ржлрж▓ рж╣рж┐рж╕рзЗржмрзЗ 24 рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

рж░рзЗржЬрж╛рж▓рзНржЯ ржЪрзЗржХ

Infinity ржмрж╛ NaN рж╣рж▓рзЗ (ржпрзЗржоржи 10/0 ржЗрждрзНржпрж╛ржжрж┐) тЖТ error ржерзНрж░рзЛ ржХрж░рж╛ред

ржкрзНрж░рж╢рзНржи ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ: eval() ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ржирж┐?
ржЙрждрзНрждрж░: eval() ржкрзБрж░рзЛ рж╕рзНржХрзЛржкрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржкрж╛рзЯ, ржирж┐рж░рж╛ржкржж ржирзЯред
Function(...) ржЖрж▓рж╛ржжрж╛ ржлрж╛ржВрж╢ржи рж╕рзНржХрзЛржкрзЗ рж░рж╛ржи рж╣рзЯ, ржПржХржЯрзБ ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкржж, ржЖрж░ ржЗржиржкрзБржЯ рждрзЛ ржЖржЧрзЗ regex ржжрж┐рзЯрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

рзй.рзо. ржорзЗржорж░рж┐ ржлрж╛ржВрж╢ржи
function handleMemory(action){
  const currentVal = expression ? Number(expression) : 0;
  switch(action){
    case 'mc':
      memory = 0;
      break;
    case 'mr':
      if (memory !== 0){
        expression = String(memory);
      }
      break;
    case 'mplus':
      if (!Number.isNaN(currentVal)){
        memory += currentVal;
      }
      break;
    case 'mminus':
      if (!Number.isNaN(currentVal)){
        memory -= currentVal;
      }
      break;
  }
  updateMemoryIndicator();
  updateDisplay();
}


currentVal тЖТ ржПржЦржи ржбрж┐рж╕ржкрзНрж▓рзЗрждрзЗ ржпрж╛ ржЖржЫрзЗ рждрж╛ржХрзЗ рж╕ржВржЦрзНржпрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржирзЗрзЯ (Number(expression)).

MC тЖТ memory = 0

MR тЖТ ржбрж┐рж╕ржкрзНрж▓рзЗрждрзЗ ржорзЗржорж░рж┐ ржнрзНржпрж╛рж▓рзБ ржжрзЗржЦрж╛рзЯред

M+ тЖТ memory = memory + currentVal

MтИТ тЖТ memory = memory - currentVal

рзй.рзп. ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ (Mouse)
keys.addEventListener('click', (e) => {
  const btn = e.target.closest('button');
  if (!btn) return;
  const val = btn.dataset.value;
  const action = btn.dataset.action;

  if (action) {
    if (action === 'clear') {
      expression = '';
      previous = '';
      updateDisplay();
      return;
    }
    if (action === 'back') {
      expression = expression.slice(0, -1);
      updateDisplay();
      return;
    }
    if (action === 'equals') {
      compute();
      return;
    }
    if (action === 'mc' || action === 'mr' || action === 'mplus' || action === 'mminus'){
      handleMemory(action);
      return;
    }
  }

  if (val !== undefined){
    appendValue(val);
  }
});


ржзрж╛рж░ржгрж╛:

ржЖржорж░рж╛ ржкрзНрж░рждрж┐ржЯрж╛ ржмрж╛ржЯржирзЗ ржЖрж▓рж╛ржжрж╛ ржЗржнрзЗржирзНржЯ ржирж╛ ржжрж┐рзЯрзЗ, ржПржХржЯрж╛ ржЗржнрзЗржирзНржЯ keys ржбрж┐ржнрзЗ ржжрж┐рзЯрзЗржЫрж┐ред

ржХрзНрж▓рж┐ржХ ржХрзЛржерж╛рзЯ рж╣рзЯрзЗржЫрзЗ ржжрзЗржЦрзЗ closest('button') ржжрж┐рзЯрзЗ ржЖрж╕рж▓ ржмрж╛ржЯржиржЯрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржЪрзНржЫрзЗред

ржпржжрж┐ data-action ржерж╛ржХрзЗ тЖТ рж╕рзНржкрзЗрж╢рж╛рж▓ ржХрж╛ржЬ (clear/back/equals/memory)ред

ржирж╛рж╣рж▓рзЗ ржпржжрж┐ data-value ржерж╛ржХрзЗ тЖТ ржУржЗ ржнрзНржпрж╛рж▓рзБ expression ржП ржпрзЛржЧ ржХрж░ржмрзЛред

рзй.рззрзж. ржЗржиржкрзБржЯ ржпрзЛржЧ ржХрж░рж╛ (appendValue)
function appendValue(v){
  if (v === '├Ч') v = '*';
  if (v === '├╖') v = '/';
  if (v === 'тИТ') v = '-';

  const last = expression.slice(-1);

  if (/^[+\-*/%]$/.test(v)) {
    if (expression === '' && v !== '-') return;
    if (/^[+\-*/%]$/.test(last)) {
      expression = expression.slice(0, -1) + v;
      updateDisplay();
      return;
    }
  }

  if (v === '.') {
    const parts = expression.split(/[\+\-\*\/%]/);
    const lastPart = parts[parts.length - 1];
    if (lastPart.includes('.')) return;
    if (last === '' || /^[+\-*/%]$/.test(last)) {
      expression += '0';
    }
  }

  expression += v;
  updateDisplay();
}


ржПржЦрж╛ржирзЗ ржХрзЯрзЗржХржЯрж╛ ржХрж╛ржЬ:

ржЪрж┐рж╣рзНржи ржЧрзБрж▓рзЛржХрзЗ JS ржЕржкрж╛рж░рзЗржЯрж░рзЗ рж░рзВржкрж╛ржирзНрждрж░

├Ч тЖТ *, ├╖ тЖТ /, тИТ тЖТ -

ржПржХржЯрж╛рж░ ржкрж░ ржПржХржЯрж╛ ржЕржкрж╛рж░рзЗржЯрж░ ржкрзЬрж╛ ржерзЗржХрзЗ ржмрж┐рж░ржд ржерж╛ржХрж╛

ржпрзЗржоржи ++, +-, */ ржПржЧрзБрж▓рж╛ ржПрзЬрж╛ржирзЛ

ржпржжрж┐ expression ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ, + ржжрж┐рждрзЗ ржжрж┐ржмрзЛ ржирж╛, ржХрж┐ржирзНрждрзБ - ржжрж┐рждрзЗ ржжрж┐ржм тЖТ ржпрзЗржи -5 ржЯрж╛ржЗржк ржХрж░рж╛ ржпрж╛рзЯред

ржбрзЗрж╕рж┐ржорж╛рж▓ ржкрзЯрзЗржирзНржЯ (.) ржХржирзНржЯрзНрж░рзЛрж▓

ржПржХржЯрж╛ржирж╛ ржПржХ рж╕ржВржЦрзНржпрж╛рзЯ ржпрзЗржи ржПржХржмрж╛рж░ржЗ . ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ
ржЙржжрж╛рж╣рж░ржг: 12.34.5 тЖТ ржнрзБрж▓, рждрж╛ржЗ ржжрзНржмрж┐рждрзАрзЯ ржбржЯ ржЖржЯржХрж╛ржирзЛред

ржХрзЛржирзЛ ржЕржкрж╛рж░рзЗржЯрж░рзЗрж░ ржкрж░ржкрж░ржЗ ржбржЯ ржжрж┐рж▓рзЗ ржЖржЧрзЗ 0 ржпрзЛржЧ ржХрж░рзЗ тЖТ 0. ржмрж╛ржирж╛ржирзЛ, ржпрзЗржи .5 тЖТ 0.5

рж╢рзЗрж╖рзЗ ржнрзНржпрж╛рж▓рзБ expression ржП ржпрзЛржЧ ржХрж░рзЗ updateDisplay() ржХрж▓ ржХрж░рж╛ рж╣рзЯред

рзй.рззрзз. рж╣рж┐рж╕рж╛ржм ржХрж░рж╛ (compute)
function compute(){
  if (!expression) return;
  try {
    const res = safeEval(expression);
    const displayRes = Number.isInteger(res)
      ? String(res)
      : String(Number.parseFloat(res.toFixed(10)).toString());

    addToHistory(expression, displayRes);
    previous   = expression + ' =';
    expression = displayRes;
    updateDisplay();
  } catch (err) {
    previous = 'Error';
    expression = '';
    updateDisplay();
    currEl.textContent = 'Error';
    setTimeout(()=> updateDisplay(), 800);
  }
}


safeEval(expression) ржжрж┐рзЯрзЗ рж░рзЗржЬрж╛рж▓рзНржЯ res ржмрзЗрж░ ржХрж░рзЗред

ржпржжрж┐ рж░рзЗржЬрж╛рж▓рзНржЯ integer рж╣рзЯ тЖТ ржпрзЗржоржи 5 тЖТ "5"

ржпржжрж┐ ржирж╛ рж╣рзЯ тЖТ ржпрзЗржоржи 3.333333333333

toFixed(10) тЖТ рж╕рж░рзНржмрзЛржЪрзНржЪ рззрзж ржжрж╢ржорж┐ржХ

parseFloat(...).toString() тЖТ ржЖржмрж╛рж░ ржлрж╛рж▓рждрзБ рж╢рзВржирзНржпржЧрзБрж▓рзЛ ржХрзЗржЯрзЗ ржжрзЗрзЯ

3.1400000000 тЖТ 3.14

рждрж╛рж░ржкрж░:

рж╣рж┐рж╕рзНржЯрж░рж┐ рж▓рж┐рж╕рзНржЯрзЗ ржПржЯрж┐ ржпрзЛржЧ ржХрж░рж╛ рж╣рзЯред

previous ржП "oldExpression =" рж░рж╛ржЦрж╛ рж╣рзЯред

expression ржП ржлрж▓рж╛ржлрж▓ред

error рж╣рж▓рзЗ ржХрж┐ржЫрзБржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп Error ржжрзЗржЦрж┐рзЯрзЗ ржЖржмрж╛рж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛ рж╣рзЯред

рзй.рззрзи. ржХрж┐ржмрзЛрж░рзНржб рж╕рж╛ржкрзЛрж░рзНржЯ
window.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    compute();
    return;
  }
  if (e.key === 'Escape') {
    e.preventDefault();
    expression = '';
    previous = '';
    updateDisplay();
    return;
  }
  if (e.key === 'Backspace') {
    e.preventDefault();
    expression = expression.slice(0,-1);
    updateDisplay();
    return;
  }
  if (e.key === 'm' || e.key === 'M') {
    e.preventDefault();
    historyPanel.classList.toggle('open');
    return;
  }

  const allowed = '0123456789+-*/%.()';
  if (allowed.includes(e.key)) {
    e.preventDefault();
    appendValue(e.key);
  }
});


Enter тЖТ result (=compute())

Escape тЖТ рж╕ржм ржХрзНрж▓рж┐ржпрж╝рж╛рж░

Backspace тЖТ рж╢рзЗрж╖ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░ ржХрж╛ржЯрзЗ

M тЖТ рж╣рж┐рж╕рзНржЯрж░рж┐ ржкрзНржпрж╛ржирзЗрж▓ ржЯржЧрж▓

ржпржжрж┐ allowed рж╕рзНржЯрзНрж░рж┐ржВрзЯрзЗрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ ржХрзЛржирзЛ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░ рж╣рзЯ (рж╕ржВржЦрзНржпрж╛ + ржЕржкрж╛рж░рзЗржЯрж░), рждрж╛рж╣рж▓рзЗ appendValue ржжрж┐рзЯрзЗ expression ржП ржпрзЛржЧ рж╣рзЯред

рзй.рззрзй. рж╢рзБрж░рзБрж░ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓ рж╕рзЗржЯржЖржк
updateDisplay();
updateMemoryIndicator();


ржкрзЗржЬ ржЦрзБрж▓рждрзЗржЗ 0 ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп ржУ ржорзЗржорж░рж┐ ржЗржирзНржбрж┐ржХрзЗржЯрж░рзЗрж░ рж╕рзНржЯрзЗржЯ ржарж┐ржХ ржХрж░рж╛рж░ ржЬржирзНржпред

рж╢рзЗрж╖ ржХржерж╛ тАУ ржирждрзБржиржжрзЗрж░ ржЬржирзНржп ржХрзА ржмрзБржЭрж▓рзЗ ржХрж╛ржЬрзЗ ржжрзЗржмрзЗ?

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯ ржерзЗржХрзЗ рждрзБржорж┐ рж╢рж┐ржЦржЫрзЛ:

HTML:

ржХрж┐ржнрж╛ржмрзЗ DOM structure ржмрж╛ржирж╛рждрзЗ рж╣рзЯ

data-* ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ рж░рж╛ржЦрж╛

id ржжрж┐рзЯрзЗ JS-ржП ржзрж░рж╛рж░ ржЙржкрж╛рзЯ

CSS:

ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ (--color) ржмрзНржпржмрж╣рж╛рж░

flex, grid, media query

ржерж┐ржо рж╕рж┐рж╕рзНржЯрзЗржо (body.dark)

JavaScript:

DOM ржерзЗржХрзЗ ржПрж▓рж┐ржорзЗржирзНржЯ ржЖржирж╛ (getElementById)

ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ (addEventListener)

classList.add/remove/toggle

localStorage ржмрзНржпржмрж╣рж╛рж░

рж╕рзНржЯрзНрж░рж┐ржВтАУржнрж┐рждрзНрждрж┐ржХ expression ржмрж╛ржирж┐рзЯрзЗ рж╣рж┐рж╕рж╛ржм ржХрж░рж╛

рж╣рж┐рж╕рзНржЯрж░рж┐, ржорзЗржорж░рж┐ ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (array of objects)
